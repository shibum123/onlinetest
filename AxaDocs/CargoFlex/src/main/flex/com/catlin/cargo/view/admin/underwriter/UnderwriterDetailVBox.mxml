<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml"
		 width="100%"
		 height="100%"
		 styleName="contentPanel"
		 borderStyle="solid"
		 xmlns:help="com.catlin.cargo.view.help.*"
		 xmlns:general="com.catlin.ui.flex.widgets.general.*"
		 implements="com.catlin.cargo.view.address.IAddressView">

	<help:TipHelper id="tipHelper"/>


	<mx:Script>
		<![CDATA[
			import com.catlin.cargo.bundles.CargoLocaleConstants;
			import com.catlin.cargo.bundles.RB_ui;
			import com.catlin.ui.flex.widgets.general.ComboBox;
			
			import mx.resources.ResourceManager;

			public function get addressLine1Component():TextInput {
				return txiAddressLine1;
			}

			public function get addressLine1FormItem():FormItem {
				return fmiAddressLine1;
			}

			public function get addressLine2Component():TextInput {
				return txiAddressLine2;
			}

			public function get addressLine3Component():TextInput {
				return txiAddressLine3;
			}

			public function get townCityComponent():TextInput {
				return txiTownCity;
			}

			public function get townCityFormItem():FormItem {
				return fmiTownCity;
			}

			public function get countyComponent():TextInput {
				return txiCounty;
			}

			public function get provinceComboBox():ComboBox {
				return cboProvince;
			}			
			
			public function get postcodeComponent():TextInput {
				return txiPostcode;
			}

			public function get postcodeFormItem():FormItem {
				return fmiPostcode;
			}

			public function get postcodeLookupActionComponent():Button {
				return btnLookupAddress;
			}

			public function get postcodeLookupTextComponent():TextInput {
				return txiPostcodeToLookup;
			}

			public function get countryComboBox():ComboBox {
				return null;
			}

			public function showPostcodeLookup(show:Boolean):void {
				fmiPostcodeLookup.includeInLayout=show;
				fmiPostcodeLookup.visible=show;
			}

			public function showCounty(show:Boolean):void {
				fmiCounty.includeInLayout=show;
				fmiCounty.visible=show;
			}

			public function showProvince(show:Boolean):void {
				fmiProvince.includeInLayout=show;
				fmiProvince.visible=show;

				cboProvince.includeInLayout=show;
				cboProvince.visible=show
			}

			private var _currentCountryIso:String = CargoLocaleConstants.COUNTRY_ISO_GB;
			
			public function set currentCountryIso(value:String):void {
				_currentCountryIso = value;
				updateLabels();
				this.dispatchEvent(new Event("countryChanged")); 
			}
			
			[Bindable("countryChanged")]
			public function get currentCountryIso():String {
				return _currentCountryIso;
			}
			
			[Bindable]
			private var postCodeLabel:String = ResourceManager.getInstance().getString(RB_ui.RB_NAME, RB_ui.POSTAL_CODE(CargoLocaleConstants.COUNTRY_ISO_GB));
			
			private function updateLabels():void {
				postCodeLabel = resourceManager.getString(RB_ui.RB_NAME, RB_ui.POSTAL_CODE(_currentCountryIso));
			}			
		]]>
	</mx:Script>


	<mx:Form>
		<mx:Text text="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_MAINTITLE)}"
				 styleName="heading1"/>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_NAME)}"
					 required="true">
			<mx:TextInput id="txiName"
						  width="180"
						  maxChars="32"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_TITLE)}"
					 required="true">
			<mx:TextInput id="txiTitle"
						  width="180"
						  maxChars="32"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_REGION)}"
					 required="true">
			<mx:TextInput id="txiRegion"
						  width="180"
						  maxChars="32"/>
		</mx:FormItem>
		<mx:FormItem label="{postCodeLabel}"
					 direction="horizontal"
					 horizontalGap="0"
					 id="fmiPostcodeLookup">
			<mx:TextInput id="txiPostcodeToLookup"
						  width="70"
						  toolTip="{tipHelper.getTips(txiPostcodeToLookup, RB_ui.TOOLTIP_GENERAL_POSTCODE)}"
						  maxChars="10"/>
			<mx:LinkButton id="btnLookupAddress"
						   styleName="link"
						   label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_POSTCODE_LOOKUP)}"
						   enabled="false"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_POSTCODE_ADDRESSLINE,['1'])}"
					 id="fmiAddressLine1">
			<mx:TextInput id="txiAddressLine1"
						  width="170"
						  maxChars="32"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_POSTCODE_ADDRESSLINE,['2'])}">
			<mx:TextInput id="txiAddressLine2"
						  width="170"
						  maxChars="32"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_POSTCODE_ADDRESSLINE,['3'])}">
			<mx:TextInput id="txiAddressLine3"
						  width="170"
						  maxChars="32"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_CITY)}"
					 id="fmiTownCity">
			<mx:TextInput id="txiTownCity"
						  width="170"
						  maxChars="32"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_COUNTY)}"
					 id="fmiCounty">
			<mx:TextInput id="txiCounty"
						  width="170"
						  maxChars="32"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_PROVINCE)}"
					 id="fmiProvince">
			<general:ComboBox id="cboProvince"
						  width="170"/>
		</mx:FormItem>
		<mx:FormItem label="{postCodeLabel}"
					 id="fmiPostcode">
			<mx:TextInput id="txiPostcode"
						  width="70"
						  maxChars="10"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_EMAIL)}"
					 required="true">
			<mx:TextInput id="txiEmailAddress"
						  width="180"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_PHONE)}"
					 required="true">
			<mx:TextInput id="txiTelephoneNumber"
						  width="180"
						  maxChars="21"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_FAX)}"
					 required="true">
			<mx:TextInput id="txiFaxNumber"
						  width="180"
						  maxChars="21"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_PHONEDDI)}"
					 required="true">
			<mx:TextInput id="txiDDNumber"
						  width="180"
						  maxChars="21"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_MOBILE)}"
					 required="true">
			<mx:TextInput id="txiMobileNumber"
						  width="180"
						  maxChars="21"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_ACCOUNT_DISABLED)}">
			<mx:CheckBox id="cbxAccountDisabled"/>
		</mx:FormItem>
		<mx:FormItem label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_USERNAME)}"
					 required="{txiUsername.enabled}">
			<mx:TextInput id="txiUsername"
						  width="180"/>
		</mx:FormItem>
		<mx:HBox width="100%"
				 horizontalAlign="right">
			<mx:Button id="btnResetPassword"
					   label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.UNDERWRITER_DETAIL_RESETPASSWORD)}"/>
			<mx:Button id="btnSave"
					   label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.SAVE)}"/>
		</mx:HBox>
	</mx:Form>
</mx:VBox>
