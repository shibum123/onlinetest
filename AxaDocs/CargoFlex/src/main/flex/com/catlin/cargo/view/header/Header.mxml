<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"
		   width="100%"
		   minHeight="47"
		   maxHeight="110"
		   horizontalScrollPolicy="off"
		   verticalScrollPolicy="off"
		   xmlns:widgets="com.catlin.ui.flex.widgets.*"
		   initialize="init(event)"
		   creationComplete="creationCompleteHandler(event)">

	<mx:states>
		<mx:State name="normal">
			<mx:SetProperty target="{linkButtonContainer}"
							name="y"
							value="0"/>
			<mx:SetProperty target="{rightContainer}"
							name="direction"
							value="vertical"/>			
			<mx:SetProperty target="{xl_insurance_logo}"
							name="includeInLayout"
							value="true"/>		
			<mx:SetProperty target="{xl_insurance_logo}"
							name="visible"
							value="true"/>
			<mx:SetProperty target="{xl_insurance_logo_small}"
							name="includeInLayout"
							value="false"/>
			<mx:SetProperty target="{xl_insurance_logo_small}"
							name="visible"
							value="false"/>
			<mx:SetProperty target="{axa_logo}"
							name="includeInLayout"
							value="true"/>
			<mx:SetProperty target="{axa_logo}"
							name="visible"
							value="true"/>
			<mx:SetProperty target="{axa_logo_small}"
							name="includeInLayout"
							value="false"/>		
			<mx:SetProperty target="{axa_logo_small}"
							name="visible"
							value="false"/>	
			<mx:SetProperty target="{userdetails}"
							name="height"
							value="20"/>
			<mx:SetProperty target="{userdetails}"
							name="direction"
							value="horizontal"/>
			<mx:SetProperty target="{leftLogo}"
							name="maxHeight"
							value="85"/>
			<mx:SetProperty target="{leftLogo}"
							name="maxWidth"
							value="85"/>
		</mx:State>
		
		<mx:State name="reduced">
			<mx:SetProperty target="{linkButtonContainer}"
							name="y"
							value="45"/>
			<mx:SetProperty target="{leftContainer}"
							name="height"
							value="55"/>
			<mx:SetProperty target="{rightContainer}"
							name="height"
							value="55"/>
			<mx:SetProperty target="{userdetails}"
							name="height"
							value="20"/>
			<mx:SetProperty target="{xl_insurance_logo}"
							name="includeInLayout"
							value="false"/>		
			<mx:SetProperty target="{xl_insurance_logo}"
							name="visible"
							value="false"/>
			<mx:SetProperty target="{xl_insurance_logo_small}"
							name="includeInLayout"
							value="true"/>
			<mx:SetProperty target="{xl_insurance_logo_small}"
							name="visible"
							value="true"/>
			<mx:SetProperty target="{axa_logo_small}"
							name="includeInLayout"
							value="true"/>		
			<mx:SetProperty target="{axa_logo_small}"
							name="visible"
							value="true"/>
			<mx:SetProperty target="{axa_logo}"
							name="includeInLayout"
							value="false"/>
			<mx:SetProperty target="{axa_logo}"
							name="visible"
							value="false"/>
			<mx:SetProperty target="{leftLogo}"
							name="maxHeight"
							value="48"/>
			<mx:SetProperty target="{leftLogo}"
							name="maxWidth"
							value="48"/>
		</mx:State>
	</mx:states>
	
	<mx:Script>
		<![CDATA[
			import com.catlin.cargo.bundles.RB_ui;
			import mx.containers.ViewStack;
			import mx.events.FlexEvent;
			import mx.events.ResizeEvent;
			
			[Bindable]
			public var dataProvider:ViewStack;
			
			public function resizeApplication(event:ResizeEvent=null):void {
				((this.width - leftContainer.width - rightContainer.width) > lnkTopMenu.width) ? this.currentState='normal' : this.currentState='reduced';
				this.invalidateDisplayList();
				
			}
			
			protected function creationCompleteHandler(event:FlexEvent):void {
				resizeApplication();
			}
			
			protected function init(event:FlexEvent):void {
				this.addEventListener(ResizeEvent.RESIZE, resizeApplication);
			}
		]]>
	</mx:Script>
	
	<mx:VBox id="linkButtonContainer"
			 width="100%"
			 height="100%"
			 verticalAlign="bottom"
			 horizontalAlign="center"
			 x="0"
			 y="0">
		
		<widgets:EqualWidthLinkBar id="lnkTopMenu"
								   dataProvider="{dataProvider}"
								   fontSize="12"
								   fontWeight="bold"
								   linkButtonStyleName="menuButton"
								   barColor="#000000"
								   linkWidth="120"
								   height="45"
								   separatorWidth="0"/>
	</mx:VBox>
	
	<mx:HBox width="100%"
			 x="0"
			 y="0"
			 verticalScrollPolicy="off"
			 horizontalScrollPolicy="off">
		
		<mx:Box id="leftContainer"
				 horizontalAlign="left"
				 verticalAlign="top"
				 minWidth="180"
				 maxWidth="350"
				 maxHeight="110"
				 minHeight="90"
				 height="100%"
				 paddingRight="2"
				 paddingTop="7"
				 paddingLeft="2"
				 paddingBottom="2"
				 direction="horizontal"
                 includeInLayout="true"
				 horizontalScrollPolicy="off"
				 verticalScrollPolicy="off"
		>

			<mx:Image id="axa_logo"
					  scaleContent="false"
					  horizontalAlign="left"
					  verticalAlign="top"
					  includeInLayout="true"
					  source="@Embed('/assets/images/axa_blue_logo.png')"/>

			<mx:Image id="axa_logo_small"
					  scaleContent="false"
					  horizontalAlign="left"
					  verticalAlign="top"
					  source="@Embed('/assets/images/axa_logo_sq_48.png')"/>

			<mx:Image id="leftLogo"
					  maintainAspectRatio="true"
					  width="100%"
					  height="100%"
					  visible="false"
					  horizontalAlign="right"
					  verticalAlign="top"
					  includeInLayout="true"
					  source=""/>


		</mx:Box>

		<mx:Spacer width="100%"
				   id="mainSpacer"/>

		<!--Start rightContainer-->
		<mx:Box id="rightContainer"
				horizontalAlign="right"
				direction="vertical"
				verticalGap="0"
				maxWidth="230"
				maxHeight="110"
				paddingRight="2"
				paddingTop="7"
				paddingLeft="2"
				paddingBottom="2"
				horizontalScrollPolicy="off"
				verticalScrollPolicy="off"
				minWidth="180"
				height="100%">
			
			<mx:Image id="xl_insurance_logo"
					  scaleContent="false"
					  horizontalAlign="right"
					  verticalAlign="top"
					  source="@Embed('/assets/images/axa_insurance.png')"/>

			<mx:Image id="xl_insurance_logo_small"
					  scaleContent="false"
					  horizontalAlign="right"
					  verticalAlign="top"
					  source="@Embed('/assets/images/axa_insurance_small.png')"/>

			<mx:Box width="100%"
					height="20"
					horizontalGap="0"
					verticalGap="0"
					verticalAlign="middle"
					horizontalAlign="right"
					horizontalScrollPolicy="off"
					verticalScrollPolicy="off"
					id="userdetails"
					direction="horizontal">
				
				<mx:Text fontSize="11"
						 width="100%"
						 textAlign="right"
						 id="user_details_TX"
						 paddingTop="2"
						 paddingRight="1"/>
				
				<mx:LinkButton styleName="logoutLinkButton"
							   label="{resourceManager.getString(RB_ui.RB_NAME, RB_ui.LOGOUT)}"
							   top="2"
							   left="1"
							   right="0"
							   id="logout_BT"/>
				
			</mx:Box>
			
		</mx:Box>
		<!--End rightContainer-->
		
	</mx:HBox>
	
</mx:Canvas>